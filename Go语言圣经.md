书籍地址：[前言 · Go语言圣经 (itsfun.top)](https://book.itsfun.top/gopl-zh/)

## 前言

### Go语言项目

1、Go语言拥有自动垃圾回收、一个包系统、函数作为一等公民、词法作用域、系统调用接口、只读的UTF8字符串等。

2、Go语言没有隐式的数值转换，没有构造函数和析构函数，没有运算符重载，没有默认参数，也没有继承，没有泛型，没有异常，没有宏，没有函数修饰，更没有线程局部存储。

3、Go语言有足够的类型系统以避免动态语言中那些粗心的类型错误，但是，Go语言的类型系统相比传统的强类型语言又要简洁很多。

4、Go语言提供了基于CSP的并发特性支持。Go语言的动态栈使得轻量级线程goroutine的初始栈可以很小，因此，创建一个goroutine的代价很小，创建百万级的goroutine完全是可行的。

5、Go语言的标准库（通常被称为语言自带的电池），提供了清晰的构建模块和公共接口，包含I/O操作、文本处理、图像、密码学、网络和分布式应用程序等，并支持许多标准化的文件格式和编解码协议。

### 本书的组织

1、第一章到第五章是基础部分，主流命令式编程语言这部分都类似。

个别之处，Go语言有自己特色的语法和风格，但是大多数程序员能很快适应。

其余章节是Go语言特有的：方法、接口、并发、包、测试和反射等语言特性。

2、Go语言的面向对象机制与一般语言不同。它没有类层次结构，甚至可以说没有类；仅仅通过组合（而不是继承）简单的对象来构建复杂的对象。

方法不仅可以定义在结构体上，而且，可以定义在任何用户自定义的类型上；并且，具体类型和抽象类型（接口）之间的关系是隐式的，所以很多类型的设计者可能并不知道该类型到底实现了哪些接口。

3、其他资料

Go语言安装：[Download and install - The Go Programming Language (golang.org)](https://golang.org/doc/install)。（linux下流程：下载压缩包、解压、设置环境变量）

Go语言的官方博客 https://blog.golang.org 会不定期发布一些Go语言最好的实践文章，包括当前语言的发展状态、未来的计划、会议报告和Go语言相关的各种会议的主题等信息。

在线访问的一个有价值的地方是可以从web页面运行Go语言的程序（而纸质书则没有这么便利了）。这个功能由来自 https://play.golang.org 的 Go Playground 提供。

Go语言是一个开源项目，你可以在 https://golang.org/pkg 阅读标准库中任意函数和类型的实现代码，和下载安装包的代码完全一致。

### 更多的信息

## 1 入门

### 1.1 Hello,World

1、Go是一门编译型语言，Go语言的工具链将源代码及其依赖转换成计算机的机器指令（译注：静态编译）。

2、Go语言提供的工具都通过一个单独的命令go调用，go命令有一系列子命令。最简单的一个子命令就是run。这个命令编译一个或多个以.go结尾的源文件，链接库文件，并运行最终生成的可执行文件。

3、go build命令编译生成可执行文件。

4、go get命令从网上下载代码，需要提前设置好GOPATH变量。

5、go语言的helloworld

```go
package main

import 'fmt'

func main() {
    fmt.Println("hello, world!")
}
```

6、Go语言的代码通过包（package）组织，包类似于其它语言里的库（libraries）或者模块（modules）。

一个包由位于单个目录下的一个或多个.go源代码文件组成，目录定义包的作用。

每个源文件都以一条package声明语句开始，helloworld的例子里就是package main，表示该文件属于哪个包，紧跟着一系列导入（import）的包，之后是存储在这个文件里的程序语句。

Go的标准库提供了100多个包，以支持常见功能，如输入、输出、排序以及文本处理。比如fmt包，就含有格式化输出、接收输入的函数。Println是其中一个基础函数，可以打印以空格间隔的一个或多个值，并在最后添加一个换行符，从而输出一整行。

main包比较特殊。它定义了一个独立可执行的程序，而不是一个库。在main里的main 函数 也很特殊，它是整个程序执行时的入口。

必须恰当导入需要的包，缺少了必要的包或者导入了不需要的包，程序都无法编译通过。

7、包声明之后是组成程序的函数、变量、常量、类型的声明语句（分别由关键字func、var、const、type定义）。

8、Go语言不需要在语句或者声明的末尾添加分号，除非一行上有多条语句。

9、gofmt工具把代码格式化为标准格式，需要养成格式化代码的好习惯。

### 1.2 命令行参数

1、os包以跨平台的方式，提供了一些与操作系统交互的函数和变量。程序的命令行参数可从os包的Args变量获取；os包外部使用os.Args访问该变量。

2、os.Args变量是一个字符串（string）的切片（slice）。

3、os.Args的第一个元素：os.Args[0]，是命令本身的名字；其它的元素则是程序启动时传给它的参数。

4、echo例子：打印命令行参数。

5、变量会在声明时直接初始化。如果变量没有显式初始化，则被隐式地赋予其类型的零值（zero value），数值类型是0，字符串类型是空字符串""。

6、对string类型，+运算符连接字符串。

7、Go语言只有for循环这一种循环语句。

for循环三个部分不需括号包围。大括号强制要求，左大括号必须和post语句在同一行。

initialization语句是可选的，在循环开始前执行。initalization如果存在，必须是一条简单语句（simple statement），即，短变量声明、自增语句、赋值语句或函数调用。

for循环的这三个部分每个都可以省略，如果省略initialization和post，分号也可以省略。

8、另一种for循环

在某种数据类型的区间（range）上遍历，如字符串或切片。使用range关键词。

每次循环迭代，range产生一对值；索引以及在该索引处的元素值。

不需要索引，可以使用空标识符（blank identifier），即_（也就是下划线）。空标识符可用于在任何语法需要变量名但程序逻辑不需要的时候（如：在循环里）丢弃不需要的循环索引，并保留元素值。

9、声明一个变量有好几种方式

```go
s := "" // 是一条短变量声明，最简洁，但只能用在函数内部，而不能用于包变量
var s string // 依赖于字符串的默认初始化零值机制，被初始化为""
var s = "" // 用得很少，除非同时声明多个变量。
var s string = "" // 显式地标明变量的类型，当变量类型与初值类型相同时，类型冗余，但如果两者类型不同，变量类型就必须了
//实践中一般使用前两种形式中的某个，初始值重要的话就显式地指定变量的类型，否则使用隐式初始化。
```

### 1.3 查找重复的行

1、正如for循环一样，if语句条件两边也不加括号，但是主体部分需要加。if语句的else部分是可选的，在if的条件为false时执行。

2、内置函数make创建空map。例如：`make(map[string]int)`，键为字符串，值为int。

3、bufio包处理输入和输出方便又高效。Scanner类型是该包最有用的特性之一，它读取输入并将其拆成行或单词；通常是处理行形式的输入最简单的方法。

4、类似于C或其它语言里的printf函数，fmt.Printf函数对一些表达式产生格式化输出。

5、Go读取文件：os.Open函数。os.Open函数返回两个值。第一个值是被打开的文件(*os.File），其后被Scanner读取。os.Open返回的第二个值是内置error类型的值。如果err等于内置值nil（译注：相当于其它语言里的NULL），那么文件被成功打开。

6、错误处理：使用Fprintf与表示任意类型默认格式值的动词%v，向标准错误流打印一条信息，然后dup继续处理下一个文件。

7、函数和包级别的变量（package-level entities）可以任意顺序声明，并不影响其被调用。

8、Go中的函数参数传递默认相当于C++中的引用传递。

9、ReadFile函数（来自于io/ioutil包），读取指定文件的全部内容。

10、strings.Split函数把字符串分割成子串的切片。

## 2 程序结构

### 2.1 命名

1、一个名字必须以一个字母（Unicode字母）或下划线开头，后面可以跟任意数量的字母、数字或下划线。大写字母和小写字母是不同的：heapSort和Heapsort是两个不同的名字。

2、有大约30多个预定义的名字，比如int和true等，主要对应内建的常量、类型和函数。这些内部预先定义的名字并不是关键字，你可以在定义中重新使用它们。在一些特殊的场景中重新定义它们也是有意义的，但是也要注意避免过度而引起语义混乱。

3、名字的开头字母的大小写决定了名字在包外的可见性。如果一个名字是大写字母开头的（译注：必须是在函数外部定义的包级名字；包级函数名本身也是包级名字），那么它将是导出的，也就是说可以被外部的包访问，例如fmt包的Printf函数就是导出的，可以在fmt包外部访问。包本身的名字一般总是用小写字母。

4、在习惯上，Go语言程序员推荐使用 驼峰式 命名，当名字由几个单词组成时优先使用大小写分隔，而不是优先用下划线分隔。

## 3 基本数据类型

1、Go语言将数据类型分为四类：基础类型、复合类型、引用类型和接口类型。

2、基础类型包括：数字、字符串和布尔型。

3、复合数据类型包括数组和结构体——是通过组合简单类型，来表达更加复杂的数据结构。

4、引用类型包括指针、切片、字典、函数、通道，虽然数据种类很多，但它们都是对程序中一个变量或状态的间接引用。

### 3.1 整型

